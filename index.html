<!DOCTYPE html>
<html lang="ar" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Adidas</title>
  <link rel="icon" href="img/a_logo.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
      <script src="https://kit.fontawesome.com/51b677b776.js" crossorigin="anonymous"></script>
  <style>
    ::selection { background: white; color: black; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Tajawal', sans-serif; }
    
.signup-btn {
  text-decoration: none;
  background-color: #ff2c64;
  border-radius: 1px;
  padding: 10px;
  color: #fff;
  font-weight: 600;
}

.signup-btn:hover {
  background-color: #b71540;
}

.fa-heart {
  color: #000;
  font-weight: 700;
  padding: 0 12px;
  font-size: large;
}

.fa-heart:hover {
  color: #b71540;
}


    #cart-dropdown, #fav-dropdown {
      display: none;
      position: absolute;
      top: 60px;
      right: 10px;
      width: 360px;
      max-height: 400px;
      overflow-y: auto;
      background-color: #1f2937;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 1000;
      padding: 15px;
    }
    #cart-dropdown.visible, #fav-dropdown.visible {
      display: block;
    }

    .icon-btn {
      cursor: pointer;
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
      gap: 6px;
      position: relative;
      color: #000;
    }
    .icon-btn:hover {
      background-color: #b91c1c;
      color: white;
    }
    .icon-btn svg {
      width: 22px;
      height: 22px;
      fill: currentColor;
    }

    .badge {
      position: absolute;
      top: 2px;
      right: 2px;
      background: #dc2626;
      color: white;
      font-size: 12px;
      font-weight: bold;
      padding: 1px 6px;
      border-radius: 9999px;
      display: none;
    }

    /* أزرار الكمية */
    .qty-btn {
      background-color: #dc2626;
      border-radius: 4px;
      padding: 2px 8px;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      color: white;
      margin: 0 4px;
      transition: background-color 0.3s;
      border: none;
    }
    .qty-btn:hover {
      background-color: #b91c1c;
    }

    /* تنسيق عناصر السلة والمفضلة */
    #cart-items li, #fav-items li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #374151;
      border-radius: 8px;
      padding: 8px 12px;
      margin-bottom: 8px;
    }
    #cart-items li span.title, #fav-items li span.title {
      flex: 1;
    }

    #checkout-btn {
      width: 100%;
      background-color: #dc2626;
      color: white;
      padding: 10px;
      font-weight: bold;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      margin-top: 10px;
      transition: background-color 0.3s;
    }
    #checkout-btn:hover {
      background-color: #b91c1c;
    }

    /* أيقونة القلب على الكارد */
    .favorite-btn {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: rgba(220, 38, 38, 0.85);
      padding: 6px;
      border-radius: 50%;
      cursor: pointer;
      transition: background-color 0.3s;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 32px;
      height: 32px;
    }
    .favorite-btn svg {
      fill: white;
      width: 20px;
      height: 20px;
      transition: fill 0.3s;
    }
    .favorite-btn.favorited {
      background-color: #ef4444; /* أحمر أكثر وضوحًا */
    }
    .favorite-btn.favorited svg {
      fill: #ffe4e6; /* وردي فاتح للقلب */
    }

    /* تغليف الكارد مع وضعية نسبية */
    .book-card {
      position: relative;
    }

    footer {
    text-align: center;
    padding: 10px;
    background-color: #111111;
    color: white;
   
}

  </style>
</head>
<!-- شاشة التحميل بفيديو -->
<div id="intro" class="fixed inset-0 bg-gray-300 flex items-center justify-center z-[9999] transition-opacity duration-1000" style="background-color: #fff;">
<video id="loading-video" muted playsinline autoplay preload="auto"
  class="w-64 md:w-96 rounded-lg shadow-lg">
  <source src="img/7b26c30f7685da24d6642c39582e95cc.mp4" type="video/mp4">
  متصفحك لا يدعم تشغيل الفيديو.
</video>

</div>


</div>


<body class="bg-white text-gray-900">

  <!-- الهيدر -->
<header class="fixed top-0 w-full bg-white shadow z-50" style="background: #ffffffa5;">
  <div class="container mx-auto flex justify-between items-center px-6 py-4">

    <!-- شعار -->
   <a href="index.html"><img src="img/a_logo.svg" alt=""></a>

    <!-- روابط التنقل (تظهر فقط على الشاشات الكبيرة) -->
    <nav class="hidden md:flex space-x-6 space-x-reverse">
      <a href="#home" class="hover:text-gray-700" style="font-weight: 900; padding-right: 15px;">Home</a>
      <a href="#collections" class="hover:text-gray-700" style="font-weight: 900;">Categories</a>
      <a href="#products" class="hover:text-gray-700" style="font-weight: 900;">Products</a>
      <a href="#offers" class="hover:text-gray-700" style="font-weight: 900;">Offers</a>
    </nav>

    <!-- أيقونات سطح المكتب -->
    <div class="hidden md:flex items-center gap-4">

 <div class="relative icon-btn" title="المفضلة" id="favorite-btn" style="margin-left: 15px;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" >
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
        <span class="badge" id="fav-count">0</span>
      </div>

      <!-- أيقونة السلة -->
      <div class="relative icon-btn" title="السلة" id="cart-btn" style="margin-left: 10px;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" >
          <path d="M7 18c-1.1 0-1.99 0.9-1.99 2S5.9 22 7 22s2-0.9 2-2-0.9-2-2-2zm10 0c-1.1 0-1.99 0.9-1.99 2s0.89 2 1.99 2 2-0.9 2-2-0.9-2-2-2zM7.16 14l1.24-3h7.27l1.25 3H7.16zm10.24-3h-9.77L6.3 6H20v2z"/>
        </svg>
        <span class="badge" id="cart-count">0</span>
      </div>
                <a class="signup-btn" href="login.html">SIGN UP</a>

    </div>

          <!-- قائمة السلة المنبثقة -->
      <div id="cart-dropdown" aria-label="محتويات السلة">
        <h4 class="text-lg font-bold mb-3 border-b border-red-600 pb-1" style="color: #fff;">محتويات السلة</h4>
        <ul id="cart-items" class="max-h-64 overflow-y-auto">
        <li class="text-gray-300">لا توجد منتجات في السلة</li>
        </ul>
        <div id="cart-total" class="mt-3 text-right font-bold text-green-400">المجموع: 0 ر.س</div>
        <button id="checkout-btn">إتمام الطلب</button>
      </div>

            <!-- قائمة المفضلة المنبثقة -->
      <div id="fav-dropdown" aria-label="المفضلة">
        <h4 class="text-lg font-bold mb-3 border-b border-red-600 pb-1" style="color: #fff;">المفضلة</h4>
        <ul id="fav-items" class="max-h-64 overflow-y-auto">
          <li class="text-gray-300">لا توجد منتجات في المفضلة</li>
        </ul>
      </div>

    <!-- زر الهامبرجر (للجوال فقط) -->
<!-- زر الهامبرجر المتحول -->
<div class="md:hidden">
  <button id="menu-btn" class="relative w-8 h-8 focus:outline-none group">
    <span class="block absolute h-0.5 w-full bg-black transform transition duration-300 ease-in-out top-1 group-[.open]:rotate-45 group-[.open]:top-3.5"></span>
    <span class="block absolute h-0.5 w-full bg-black transform transition duration-300 ease-in-out top-3.5 group-[.open]:opacity-0"></span>
    <span class="block absolute h-0.5 w-full bg-black transform transition duration-300 ease-in-out top-6 group-[.open]:-rotate-45 group-[.open]:top-3.5"></span>
  </button>
</div>


    <!-- قائمة الجوال تظهر عند الضغط على زر الهامبرجر -->
<nav id="mobile-menu" class="hidden flex-col absolute top-20 right-6 bg-white rounded-lg shadow-lg p-4 space-y-4 md:hidden z-50 text-right">
  <a href="#home" class="block text-black hover:text-gray-700">الرئيسية</a>
  <a href="#collections" class="block text-black hover:text-gray-700">التصنيفات</a>
  <a href="#products" class="block text-black hover:text-gray-700">المنتجات</a>
  <a href="#offers" class="block text-black hover:text-gray-700">العروض</a>
  <a href="#contact" class="block text-black hover:text-gray-700">تواصل معنا</a>

  <hr class="my-2">

  <!-- أيقونات داخل القائمة -->
  <a href="#" class="block text-xl hover:text-gray-700" style="color: #ff2c64;">السلة</a>
  <a href="#" class="block text-xl hover:text-gray-700" style="padding-bottom: 10px; color: #ff2c64;">المفضلة</a>
  <a class="signup-btn" href="login.html">SIGN UP</a>
</nav>

  </div>
</header>



<!-- هيرو -->
<section class="relative h-screen w-full overflow-hidden">
<video id="hero-video" autoplay muted loop playsinline preload="auto"
  class="absolute top-0 left-0 w-full h-full object-cover">
  <source src="img/mixkit-one-on-one-in-a-soccer-game-43483-full-hd.mp4" type="video/mp4">
  متصفحك لا يدعم تشغيل الفيديو.
</video>

</section>



  <!-- التصنيفات -->
  <section id="collections" class="py-20 bg-gray-100">
    <div class="container mx-auto text-center">
      <h3 class="text-3xl font-bold mb-12" data-aos="fade-up">POPULAR RIGHT NOW :</h3>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
       <a href="men.html"><div class="bg-white p-6 rounded-xl shadow hover:shadow-xl transition" data-aos="fade-up">
          <img src="img/تنزيل (1).jpg" class="w-full h-70 object-cover rounded mb-4">
          <h4 class="text-xl font-semibold">MEN</h4>
        </div></a>
      <a href="women.html"><div class="bg-white p-6 rounded-xl shadow hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="100">
          <img src="img/ad.jpg" class="w-full h-70 object-cover rounded mb-4">
          <h4 class="text-xl font-semibold">Woman</h4>
        </div></a>
       <a href="kids.html"><div class="bg-white p-6 rounded-xl shadow hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="200">
          <img src="img/تنزيل (2).jpg" class="w-full h-70 object-cover rounded mb-4">
          <h4 class="text-xl font-semibold">Kids</h4>
        </div></a>
      <a href="real madrid.html"><div class="bg-white p-6 rounded-xl shadow hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="200">
          <img src="img/mad.jpg" class="w-full h-70 object-cover rounded mb-4">
          <h4 class="text-xl font-semibold">Real Madrid</h4>
        </div></a>
        <a href="Padel.html"> <div class="bg-white p-6 rounded-xl shadow hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="200">
          <img src="img/padel50.jpg" class="w-full h-50 object-cover rounded mb-4">
          <h4 class="text-xl font-semibold">Padel</h4>
        </div>
      <a href="Ball.html"><div class="bg-white p-6 rounded-xl shadow hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="200">
          <img src="img/ball50.jpg" class="w-full h-50 object-cover rounded mb-4">
          <h4 class="text-xl font-semibold">Ball</h4>
        </div></a>
        <a href="adidas.html"><div class="bg-white p-6 rounded-xl shadow hover:shadow-xl transition" data-aos="fade-up" data-aos-delay="200">
          <img src="img/xz.jpg" class="w-full h-80 object-cover rounded mb-4">
          <h4 class="text-xl font-semibold">ADIDAS</h4>
        </div></a>
      </div>
    </div>
  </section>

  <!-- المنتجات -->
<!-- المنتجات -->
<section id="products" class="py-20 bg-white">
  <div class="container mx-auto text-center">
    <h3 class="text-3xl font-bold mb-12" data-aos="fade-up">Selected Products :</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
      <div class="border rounded-xl overflow-hidden shadow hover:scale-105 transition book-card" data-book-title="حذاء أديداس سوبر ستار" data-book-price="329" data-aos="fade-up" style="position: relative;">
        <img src="img/sho.jpg" class="w-full h-80 object-cover">
        <div class="p-4 text-left">
          <h4 class="text-xl font-bold mb-1">حذاء أديداس سوبر ستار</h4>
          <p class="text-gray-600">الراحة والأداء الكلاسيكي.</p>
          <span class="text-black font-bold">SAR 329</span>
          <button class="add-to-cart mt-4 w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition" aria-label="أضف حذاء أديداس سوبر ستار إلى السلة">شراء</button>
        </div>
      </div>
      <div class="border rounded-xl overflow-hidden shadow hover:scale-105 transition book-card" data-book-title="جاكيت رياضي شتوي" data-book-price="499" data-aos="fade-up" data-aos-delay="100" style="position: relative;">
        <img src="img/jack.jpg" class="w-full h-80 object-cover">
        <div class="p-4 text-left">
          <h4 class="text-xl font-bold mb-1">جاكيت رياضي شتوي</h4>
          <p class="text-gray-600">مقاوم للبرد والرياح.</p>
          <span class="text-black font-bold">SAR 499</span>
          <button class="add-to-cart mt-4 w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition" aria-label="أضف جاكيت رياضي شتوي إلى السلة">شراء</button>
        </div>
      </div>
      <div class="border rounded-xl overflow-hidden shadow hover:scale-105 transition book-card" data-book-title="شنطة ظهر كلاسيكية" data-book-price="179" data-aos="fade-up" data-aos-delay="200" style="position: relative;">
        <img src="img/bag.jpg" class="w-full h-80 object-cover">
        <div class="p-4 text-left">
          <h4 class="text-xl font-bold mb-1">شنطة ظهر كلاسيكية</h4>
          <p class="text-gray-600">خفيفة وعملية لكل يوم.</p>
          <span class="text-black font-bold">SAR 179</span>
          <button class="add-to-cart mt-4 w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition" aria-label="أضف شنطة ظهر كلاسيكية إلى السلة">شراء</button>
        </div>
      </div>
    </div>
  </div>
</section>


  <!-- العروض -->
  <section id="offers" class="py-20 bg-gray-100">
    <div class="container mx-auto text-center">
      <h3 class="text-3xl font-bold mb-10" data-aos="fade-right">Seasonal offers :</h3>
      <div class="grid md:grid-cols-2 gap-6">
        <div class="bg-black text-white p-8 rounded-xl" data-aos="fade-right">
          <h4 class="text-2xl font-bold mb-2">خصم حتى 40% على الأحذية المختارة</h4>
          <p class="text-gray-300">لفترة محدودة - اغتنم الفرصة!</p>
        </div>
        <div class="bg-black text-white p-8 rounded-xl" data-aos="fade-left">
          <h4 class="text-2xl font-bold mb-2">اشترِ 2 واحصل على الثالث مجانًا</h4>
          <p class="text-gray-300">على مجموعة محددة من القمصان والكنزات.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- تواصل -->
<footer class="bg-black text-white py-10 px-6 md:px-20">
  <div class="max-w-7xl mx-auto grid grid-cols-2 md:grid-cols-6 gap-8 text-sm">
    <!-- PRODUCTS -->
    <div>
      <h3 class="font-bold mb-3">PRODUCTS</h3>
      <ul class="space-y-1">
        <li><a href="#">Shoes</a></li>
        <li><a href="#">Clothing</a></li>
        <li><a href="#">Accessories</a></li>
      </ul>
    </div>
    <!-- SPORTS -->
    <div>
      <h3 class="font-bold mb-3">SPORTS</h3>
      <ul class="space-y-1">
        <li><a href="#">Motorsport</a></li>
        <li><a href="#">Running</a></li>
        <li><a href="#">Basketball</a></li>
        <li><a href="#">Football</a></li>
        <li><a href="#">Yoga</a></li>
        <li><a href="#">Outdoor</a></li>
        <li><a href="#">Tennis</a></li>
        <li><a href="#">Training</a></li>
      </ul>
    </div>
    <!-- CATEGORY -->
    <div>
      <h3 class="font-bold mb-3">CATEGORY</h3>
      <ul class="space-y-1">
        <li><a href="#">Men</a></li>
        <li><a href="#">Women</a></li>
        <li><a href="#">Kids</a></li>
        <li><a href="#">Outlet</a></li>
      </ul>
    </div>
    <!-- COMPANY INFO -->
    <div>
      <h3 class="font-bold mb-3">COMPANY INFO</h3>
      <ul class="space-y-1">
        <li><a href="#">About Us</a></li>
        <li><a href="#">Careers</a></li>
        <li><a href="#">Carbon Footprint</a></li>
        <li><a href="#">Press</a></li>
        <li><a href="#">adiClub</a></li>
      </ul>
    </div>
    <!-- SUPPORT -->
    <div>
      <h3 class="font-bold mb-3">SUPPORT</h3>
      <ul class="space-y-1">
        <li><a href="#">Help</a></li>
        <li><a href="#">Shipping</a></li>
        <li><a href="#">Returns & Exchanges</a></li>
        <li><a href="#">Order Tracker</a></li>
        <li><a href="#">adiClub & Newsletter</a></li>
        <li><a href="#">Vouchers</a></li>
        <li><a href="#">Size Charts</a></li>
        <li><a href="#">Contact Us</a></li>
        <li><a href="#">Storefinder</a></li>
        <li><a href="#">Whatsapp Privacy Policy</a></li>
      </ul>
    </div>
    <!-- FOLLOW US -->
    <div>
      <h3 class="font-bold mb-3">FOLLOW US</h3>
      <div class="flex space-x-4">
        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" class="w-5 h-5" alt="Facebook"></a>
        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/733/733558.png" class="w-5 h-5" alt="Instagram"></a>
        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/733/733646.png" class="w-5 h-5" alt="YouTube"></a>
      </div>
    </div>
  </div>

  <!-- Bottom Line -->
  <div class="mt-10 border-t border-gray-700 pt-4 text-xs text-gray-400 text-center">
    <p>Data Settings | 🇸🇦 Saudi Arabia | Cookie Settings | Privacy Policy | Terms And Conditions | Imprint</p>
    <p>Adidas Arabia Trading - CR Number 1010867150 - VAT Number 311621652900003</p>
    <p>Programming("Mohammed Thabet")</p>
  </div>
</footer>


  <!-- AOS Library -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init({ duration: 800, once: true });</script>
  
<script>
window.addEventListener("load", () => {
  const intro = document.getElementById("intro");
  const introVideo = intro.querySelector("video");

  function hideIntro() {
    intro.classList.add("opacity-0");
    setTimeout(() => {
      intro.style.display = "none";
    }, 1000);
  }

  // شغل الفيديو
  introVideo.play().catch(() => {
    // لو منع المتصفح التشغيل التلقائي، ننتظر تفاعل المستخدم
    document.body.addEventListener('click', () => {
      introVideo.play();
    }, { once: true });
  });

  // استمع لنهاية الفيديو وخفي الشاشة وقتها
  introVideo.addEventListener('ended', () => {
    hideIntro();
  });

  // كاحتياط: لو الفيديو ما اشتغل أو عطل، خفي الشاشة بعد 6 ثواني
  setTimeout(() => {
    if (intro.style.display !== "none") {
      hideIntro();
    }
  }, 6000);
});



  document.addEventListener("DOMContentLoaded", () => {
    const loadingVideo = document.getElementById("loading-video");
    const heroVideo = document.getElementById("hero-video");

    // محاولة تشغيل فيديو شاشة التحميل
    if (loadingVideo) {
      loadingVideo.play().catch(err => {
        console.warn("فشل تشغيل فيديو التحميل:", err);
      });
    }

    // محاولة تشغيل فيديو الهيرو
    if (heroVideo) {
      heroVideo.play().catch(err => {
        console.warn("فشل تشغيل فيديو الهيرو:", err);
      });
    }
  });






  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  menuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    menuBtn.classList.toggle('open'); // لتفعيل الحركة
  });

 let cart = [];
let favorites = [];

const cartBtn = document.getElementById("cart-btn");
const favBtn = document.getElementById("favorite-btn");
const cartDropdown = document.getElementById("cart-dropdown");
const favDropdown = document.getElementById("fav-dropdown");
const cartCount = document.getElementById("cart-count");
const favCount = document.getElementById("fav-count");
const cartItemsList = document.getElementById("cart-items");
const favItemsList = document.getElementById("fav-items");
const checkoutBtn = document.getElementById("checkout-btn");

function updateCartCount() {
  if (cart.length > 0) {
    cartCount.style.display = "inline-block";
    cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
  } else {
    cartCount.style.display = "none";
    cartCount.textContent = "0";
  }
}

function updateFavCount() {
  if (favorites.length > 0) {
    favCount.style.display = "inline-block";
    favCount.textContent = favorites.length;
  } else {
    favCount.style.display = "none";
    favCount.textContent = "0";
  }
}

function renderCart() {
  cartItemsList.innerHTML = "";

  if (cart.length === 0) {
    const emptyMsg = document.createElement("li");
    emptyMsg.textContent = "لا توجد منتجات في السلة";
    emptyMsg.classList.add("text-gray-400", "text-center");
    cartItemsList.appendChild(emptyMsg);
    document.getElementById("cart-total").textContent = "المجموع: 0 ر.س";
    return;
  }

  let total = 0;

  cart.forEach((item, index) => {
    const li = document.createElement("li");
    li.classList.add("flex", "justify-between", "items-center", "mb-2");

    // جزء العنوان والسعر
    const titlePriceDiv = document.createElement("div");
    titlePriceDiv.classList.add("flex", "gap-2", "items-center");

    const titleSpan = document.createElement("span");
    titleSpan.classList.add("title", "font-semibold");
    titleSpan.textContent = item.title;

    const priceSpan = document.createElement("span");
    priceSpan.textContent = `${item.price.toFixed(2)} ر.س`;
    priceSpan.classList.add("text-green-400", "font-semibold");

    titlePriceDiv.appendChild(titleSpan);
    titlePriceDiv.appendChild(priceSpan);

    // زر التحكم بالكمية
    const qtyControlsDiv = document.createElement("div");
    qtyControlsDiv.classList.add("flex", "items-center", "gap-1");

    const minusBtn = document.createElement("button");
    minusBtn.textContent = "-";
    minusBtn.classList.add("qty-btn");
    minusBtn.setAttribute("aria-label", `إنقاص كمية ${item.title}`);
    minusBtn.onclick = () => {
      if (item.quantity > 1) {
        item.quantity--;
      } else {
        cart.splice(index, 1);
      }
      updateCartCount();
      renderCart();
    };

    const qtySpan = document.createElement("span");
    qtySpan.textContent = item.quantity;
    qtySpan.style.minWidth = "20px";
    qtySpan.style.textAlign = "center";

    const plusBtn = document.createElement("button");
    plusBtn.textContent = "+";
    plusBtn.classList.add("qty-btn");
    plusBtn.setAttribute("aria-label", `زيادة كمية ${item.title}`);
    plusBtn.onclick = () => {
      item.quantity++;
      updateCartCount();
      renderCart();
    };

    qtyControlsDiv.appendChild(minusBtn);
    qtyControlsDiv.appendChild(qtySpan);
    qtyControlsDiv.appendChild(plusBtn);

    li.appendChild(titlePriceDiv);
    li.appendChild(qtyControlsDiv);

    cartItemsList.appendChild(li);

    total += item.price * item.quantity;
  });

  document.getElementById("cart-total").textContent = `المجموع: ${total.toFixed(2)} ر.س`;
}

function renderFavorites() {
  favItemsList.innerHTML = "";
  if (favorites.length === 0) {
    const emptyMsg = document.createElement("li");
    emptyMsg.textContent = "لا توجد منتجات في المفضلة";
    emptyMsg.classList.add("text-gray-300", "text-center");
    favItemsList.appendChild(emptyMsg);
    return;
  }

  favorites.forEach((title, index) => {
    const li = document.createElement("li");
    li.classList.add("flex", "justify-between", "items-center", "mb-1");

    const titleSpan = document.createElement("span");
    titleSpan.classList.add("title");
    titleSpan.textContent = title;

    const removeBtn = document.createElement("button");
    removeBtn.textContent = "✖";
    removeBtn.setAttribute("aria-label", `حذف ${title} من المفضلة`);
    removeBtn.style.background = "none";
    removeBtn.style.border = "none";
    removeBtn.style.color = "white";
    removeBtn.style.cursor = "pointer";
    removeBtn.style.fontSize = "18px";
    removeBtn.onclick = () => {
      favorites.splice(index, 1);
      updateFavCount();
      renderFavorites();
      updateFavoriteButtons();
    };

    li.appendChild(titleSpan);
    li.appendChild(removeBtn);
    favItemsList.appendChild(li);
  });
}

function updateFavoriteButtons() {
  document.querySelectorAll(".favorite-btn").forEach(btn => {
    const bookCard = btn.closest(".book-card");
    if (!bookCard) return;
    const title = bookCard.getAttribute("data-book-title");
    if (favorites.includes(title)) {
      btn.classList.add("favorited");
      btn.setAttribute("aria-pressed", "true");
      btn.title = "حُذفت من المفضلة";
    } else {
      btn.classList.remove("favorited");
      btn.setAttribute("aria-pressed", "false");
      btn.title = "أضف إلى المفضلة";
    }
  });
}

cartBtn.addEventListener("click", e => {
  e.stopPropagation();
  cartDropdown.classList.toggle("visible");
  favDropdown.classList.remove("visible");
});

favBtn.addEventListener("click", e => {
  e.stopPropagation();
  favDropdown.classList.toggle("visible");
  cartDropdown.classList.remove("visible");
});

document.addEventListener("click", () => {
  cartDropdown.classList.remove("visible");
  favDropdown.classList.remove("visible");
});

cartDropdown.addEventListener("click", e => e.stopPropagation());
favDropdown.addEventListener("click", e => e.stopPropagation());

document.querySelectorAll(".add-to-cart").forEach(btn => {
  btn.addEventListener("click", e => {
    e.preventDefault();
    e.stopPropagation();

    const bookCard = btn.closest("[data-book-title]");
    if (!bookCard) return;

    const title = bookCard.getAttribute("data-book-title");
    const price = parseFloat(bookCard.getAttribute("data-book-price")) || 0;

    const existingItem = cart.find(item => item.title === title);
    if (existingItem) {
      existingItem.quantity++;
    } else {
      cart.push({ title, quantity: 1, price });
    }
    updateCartCount();
    renderCart();

    cartDropdown.classList.add("visible");
    favDropdown.classList.remove("visible");
  });
});

document.querySelectorAll(".favorite-btn").forEach(btn => {
  btn.addEventListener("click", e => {
    e.preventDefault();
    e.stopPropagation();

    const bookCard = btn.closest("[data-book-title]");
    if (!bookCard) return;

    const title = bookCard.getAttribute("data-book-title");

    if (favorites.includes(title)) {
      favorites = favorites.filter(t => t !== title);
    } else {
      favorites.push(title);
    }
    updateFavCount();
    renderFavorites();
    updateFavoriteButtons();

    favDropdown.classList.add("visible");
    cartDropdown.classList.remove("visible");
  });
});

checkoutBtn.addEventListener("click", () => {
  const totalBooks = cart.reduce((sum, item) => sum + item.quantity, 0);
  const totalPrice = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
  alert(`تم إتمام الطلب لعدد ${totalBooks} كتب، بإجمالي ${totalPrice.toFixed(2)} ر.س.`);
  cart = [];
  updateCartCount();
  renderCart();
  cartDropdown.classList.remove("visible");
});

// التهيئة الأولية
updateCartCount();
updateFavCount();
renderCart();
renderFavorites();
updateFavoriteButtons();

</script>



</body>
</html>
